package testCases;


import java.time.Duration;

import org.apache.commons.lang3.RandomStringUtils;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.Assert;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;


import pageObjects.AccountRegistrationPage;
import pageObjects.HomePage;

public class TC001_AccountRegistrationTest {
	public WebDriver driver;
	
	@BeforeClass
	public void setUp() {
		driver = new ChromeDriver();
		driver.manage().deleteAllCookies();
		driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(200));
	//	driver.get("https://demo.opencart.com/en-gb?route=common/home");
			driver.get("https://demo.opencart.com/en-gb?route=account/register");

		driver.manage().window().maximize();
		
		
	}
	
/*	@AfterClass
	public void tearDown() {
		driver.quit();
	}
	
	*/
	
	
	@Test
	public void verify_account_registration() throws InterruptedException {
/*		HomePage hp = new HomePage(driver);
		hp.clickMyAct();
		Thread.sleep(1000);
		hp.clickReg();
		*/
		
		AccountRegistrationPage regPage = new AccountRegistrationPage(driver);
		regPage.setFirstname(randomeString());
		regPage.setLastname(randomeString().toUpperCase());
		regPage.setEmail(randomeString()+"@gmail.com");
		
		String password = randomAlphaNumeric();
		regPage.setPwd(password);
		
		regPage.setPrivacyPolcy();
		
		
	
		regPage.clkContinue();
		
		Thread.sleep(1000);
		String conMsg = regPage.getConfirmationMsg();
		System.out.println(conMsg);
		Assert.assertEquals(conMsg,"Your Account Has Been Created!");
		
	
	}
	
	public String randomAlphaNumeric() {
		String generatedNum = RandomStringUtils.randomNumeric(10);
		String generatedString = RandomStringUtils.randomAlphabetic(10);
		return (generatedString + "@" + generatedNum );
	}

	public String randomeString() {
		String genaratedString = RandomStringUtils.randomAlphabetic(5);
		return genaratedString;
	}

	
}
